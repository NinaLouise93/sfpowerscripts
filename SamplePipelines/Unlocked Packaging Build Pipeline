pool:
  name: Hosted Ubuntu 1604
#Your build pipeline references an undefined variable named ‘prod.user’. Create or edit the build pipeline for this YAML file, define the variable on the Variables tab. See https://go.microsoft.com/fwlink/?linkid=865972
#Your build pipeline references an undefined variable named ‘prod.consumerkey’. Create or edit the build pipeline for this YAML file, define the variable on the Variables tab. See https://go.microsoft.com/fwlink/?linkid=865972
#Your build pipeline references an undefined variable named ‘build_package.sfpowerscripts_incremented_project_version’. Create or edit the build pipeline for this YAML file, define the variable on the Variables tab. See https://go.microsoft.com/fwlink/?linkid=865972

steps:
- task: AzlamSalam.sfpowerscripts.sfpwowerkit-installsfdx-task.sfpwowerkit-installsfdx-task@1
  displayName: 'Install SFDX'

- task: AzlamSalam.sfpowerscripts.sfpwowerkit-authenticatedevhub-task.sfpwowerkit-authenticatedevhub-task@0
  displayName: 'Authenticate DevHub'
  inputs:
    jwt_key_file: 'ba6ca248-d551-4b0d-9c60-19ddc1351a85'
    username: '$(prod.user)'
    clientid: '$(prod.consumerkey)'

- task: AzlamSalam.sfpowerscripts.sfpwowerscript-incrementversionnumber-task.sfpwowerscript-incrementversionnumber-task@1
  displayName: 'Increments the BuildNumber version number '

- task: AzlamSalam.sfpowerscripts.sfpwowerscripts-createunlockedpackage-task.sfpwowerscripts-createunlockedpackage-task@2
  displayName: 'Creates a new version of  force-di'
  inputs:
    package: 'force-di'
    version_number: '$(build_package.sfpowerscripts_incremented_project_version)'
    tag: master
